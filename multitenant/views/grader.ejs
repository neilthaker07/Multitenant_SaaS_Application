<h3>Change Tenant</h3>
<a href="/"> SEQ </a>
<a href="/grader/admin"> GRAPH </a>
<br><br>
<!--

<form action="/savefile" method = "post">
    Insert Code Here <br>
    <textarea name="textarea" rows="15" cols="35"></textarea><br>
    <input id="btn-save" type="submit" value="Process Code" />
</form>

<img src= filename >
-->

<form action="/submit2" method = "post">

    <div id="fileUpload">Choose zip file

        <button class="btn btn-lg upload-btn" style="display:none" type="button">Upload File</button>
        <input id="upload-input" type="file"  name="uploads[]" multiple="multiple"></div>

    <br><button type="submit" id="diagramButton"> Get Diagram </button>

</form>

<img src= <%=filename%>>

<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
<script type = "text/javascript"
        src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<script>

    $('.upload-btn').on('click', function (){
        $('#upload-input').click()
    });

    $('#upload-input').on('change', function(){

        var files = $(this).get(0).files;

        if (files.length > 0){
            // create a FormData object which will be sent as the data payload in the
            // AJAX request
            var formData = new FormData();

            // loop through all the selected files and add them to the formData object
            for (var i = 0; i < files.length; i++) {
                var file = files[i];

                // add the files to formData object for the data payload
                formData.append('uploads[]', file, file.name);
            }

            $.ajax({
                url: '/uploading',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function(data){
                    console.log('upload successful!\n' + data);
                },
                xhr: function() {
                    // create an XMLHttpRequest
                    var xhr = new XMLHttpRequest();

                    // listen to the 'progress' event
                    xhr.upload.addEventListener('progress', function(evt) {

                    }, false);

                    return xhr;
                }
            });

        }
    });

</script>
